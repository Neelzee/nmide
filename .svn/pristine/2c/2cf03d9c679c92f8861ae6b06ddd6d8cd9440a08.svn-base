(()=>{var Ee=Object.create;var Dr=Object.defineProperty;var Ne=Object.getOwnPropertyDescriptor;var Oe=Object.getOwnPropertyNames;var We=Object.getPrototypeOf,be=Object.prototype.hasOwnProperty;var Lr=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports),we=(r,t)=>{for(var e in t)Dr(r,e,{get:t[e],enumerable:!0})},Ue=(r,t,e,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Oe(t))!be.call(r,o)&&o!==e&&Dr(r,o,{get:()=>t[o],enumerable:!(n=Ne(t,o))||n.enumerable});return r};var D=(r,t,e)=>(e=r!=null?Ee(We(r)):{},Ue(t||!r||!r.__esModule?Dr(e,"default",{value:r,enumerable:!0}):e,r));var S=Lr(v=>{"use strict";var qe=v&&v.__spreadArray||function(r,t,e){if(e||arguments.length===2)for(var n=0,o=t.length,u;n<o;n++)(u||!(n in t))&&(u||(u=Array.prototype.slice.call(t,0,n)),u[n]=t[n]);return r.concat(u||Array.prototype.slice.call(t))};Object.defineProperty(v,"__esModule",{value:!0});v.dual=v.getEndomorphismMonoid=v.SK=v.hole=v.constVoid=v.constUndefined=v.constNull=v.constFalse=v.constTrue=v.unsafeCoerce=v.apply=v.getRing=v.getSemiring=v.getMonoid=v.getSemigroup=v.getBooleanAlgebra=void 0;v.identity=jr;v.constant=tr;v.flip=Le;v.flow=ht;v.tuple=je;v.increment=Be;v.decrement=ke;v.absurd=gt;v.tupled=He;v.untupled=Ke;v.pipe=ze;v.not=Ge;var Se=function(r){return function(){return{meet:function(t,e){return function(n){return r.meet(t(n),e(n))}},join:function(t,e){return function(n){return r.join(t(n),e(n))}},zero:function(){return r.zero},one:function(){return r.one},implies:function(t,e){return function(n){return r.implies(t(n),e(n))}},not:function(t){return function(e){return r.not(t(e))}}}}};v.getBooleanAlgebra=Se;var Fe=function(r){return function(){return{concat:function(t,e){return function(n){return r.concat(t(n),e(n))}}}}};v.getSemigroup=Fe;var Ve=function(r){var t=(0,v.getSemigroup)(r);return function(){return{concat:t().concat,empty:function(){return r.empty}}}};v.getMonoid=Ve;var Ce=function(r){return{add:function(t,e){return function(n){return r.add(t(n),e(n))}},zero:function(){return r.zero},mul:function(t,e){return function(n){return r.mul(t(n),e(n))}},one:function(){return r.one}}};v.getSemiring=Ce;var Pe=function(r){var t=(0,v.getSemiring)(r);return{add:t.add,mul:t.mul,one:t.one,zero:t.zero,sub:function(e,n){return function(o){return r.sub(e(o),n(o))}}}};v.getRing=Pe;var De=function(r){return function(t){return t(r)}};v.apply=De;function jr(r){return r}v.unsafeCoerce=jr;function tr(r){return function(){return r}}v.constTrue=tr(!0);v.constFalse=tr(!1);v.constNull=tr(null);v.constUndefined=tr(void 0);v.constVoid=v.constUndefined;function Le(r){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.length>1?r(t[1],t[0]):function(n){return r(n)(t[0])}}}function ht(r,t,e,n,o,u,a,i,p){switch(arguments.length){case 1:return r;case 2:return function(){return t(r.apply(this,arguments))};case 3:return function(){return e(t(r.apply(this,arguments)))};case 4:return function(){return n(e(t(r.apply(this,arguments))))};case 5:return function(){return o(n(e(t(r.apply(this,arguments)))))};case 6:return function(){return u(o(n(e(t(r.apply(this,arguments))))))};case 7:return function(){return a(u(o(n(e(t(r.apply(this,arguments)))))))};case 8:return function(){return i(a(u(o(n(e(t(r.apply(this,arguments))))))))};case 9:return function(){return p(i(a(u(o(n(e(t(r.apply(this,arguments)))))))))}}}function je(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return r}function Be(r){return r+1}function ke(r){return r-1}function gt(r){throw new Error("Called `absurd` function which should be uncallable")}function He(r){return function(t){return r.apply(void 0,t)}}function Ke(r){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r(t)}}function ze(r,t,e,n,o,u,a,i,p){switch(arguments.length){case 1:return r;case 2:return t(r);case 3:return e(t(r));case 4:return n(e(t(r)));case 5:return o(n(e(t(r))));case 6:return u(o(n(e(t(r)))));case 7:return a(u(o(n(e(t(r))))));case 8:return i(a(u(o(n(e(t(r)))))));case 9:return p(i(a(u(o(n(e(t(r))))))));default:{for(var f=arguments[0],d=1;d<arguments.length;d++)f=arguments[d](f);return f}}}v.hole=gt;var Je=function(r,t){return t};v.SK=Je;function Ge(r){return function(t){return!r(t)}}var $e=function(){return{concat:function(r,t){return ht(r,t)},empty:jr}};v.getEndomorphismMonoid=$e;var Ze=function(r,t){var e=typeof r=="number"?function(n){return n.length>=r}:r;return function(){var n=Array.from(arguments);return e(arguments)?t.apply(this,n):function(o){return t.apply(void 0,qe([o],n,!1))}}};v.dual=Ze});var vt=Lr(l=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});l.eqDate=l.eqNumber=l.eqString=l.eqBoolean=l.eq=l.strictEqual=l.getStructEq=l.getTupleEq=l.Contravariant=l.getMonoid=l.getSemigroup=l.eqStrict=l.URI=l.contramap=l.tuple=l.struct=l.fromEquals=void 0;var Wo=S(),bo=function(r){return{equals:function(t,e){return t===e||r(t,e)}}};l.fromEquals=bo;var wo=function(r){return(0,l.fromEquals)(function(t,e){for(var n in r)if(!r[n].equals(t[n],e[n]))return!1;return!0})};l.struct=wo;var Uo=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return(0,l.fromEquals)(function(e,n){return r.every(function(o,u){return o.equals(e[u],n[u])})})};l.tuple=Uo;var qo=function(r,t){return(0,Wo.pipe)(r,(0,l.contramap)(t))},So=function(r){return function(t){return(0,l.fromEquals)(function(e,n){return t.equals(r(e),r(n))})}};l.contramap=So;l.URI="Eq";l.eqStrict={equals:function(r,t){return r===t}};var Fo={equals:function(){return!0}},Vo=function(){return{concat:function(r,t){return(0,l.fromEquals)(function(e,n){return r.equals(e,n)&&t.equals(e,n)})}}};l.getSemigroup=Vo;var Co=function(){return{concat:(0,l.getSemigroup)().concat,empty:Fo}};l.getMonoid=Co;l.Contravariant={URI:l.URI,contramap:qo};l.getTupleEq=l.tuple;l.getStructEq=l.struct;l.strictEqual=l.eqStrict.equals;l.eq=l.Contravariant;l.eqBoolean=l.eqStrict;l.eqString=l.eqStrict;l.eqNumber=l.eqStrict;l.eqDate={equals:function(r,t){return r.valueOf()===t.valueOf()}}});var Te=Lr(c=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});c.ordDate=c.ordNumber=c.ordString=c.ordBoolean=c.ord=c.getDualOrd=c.getTupleOrd=c.between=c.clamp=c.max=c.min=c.geq=c.leq=c.gt=c.lt=c.equals=c.trivial=c.Contravariant=c.getMonoid=c.getSemigroup=c.URI=c.contramap=c.reverse=c.tuple=c.fromCompare=c.equalsDefault=void 0;var Do=vt(),Cr=S(),Lo=function(r){return function(t,e){return t===e||r(t,e)===0}};c.equalsDefault=Lo;var jo=function(r){return{equals:(0,c.equalsDefault)(r),compare:function(t,e){return t===e?0:r(t,e)}}};c.fromCompare=jo;var Bo=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return(0,c.fromCompare)(function(e,n){for(var o=0;o<r.length-1;o++){var u=r[o].compare(e[o],n[o]);if(u!==0)return u}return r[o].compare(e[o],n[o])})};c.tuple=Bo;var ko=function(r){return(0,c.fromCompare)(function(t,e){return r.compare(e,t)})};c.reverse=ko;var Ho=function(r,t){return(0,Cr.pipe)(r,(0,c.contramap)(t))},Ko=function(r){return function(t){return(0,c.fromCompare)(function(e,n){return t.compare(r(e),r(n))})}};c.contramap=Ko;c.URI="Ord";var zo=function(){return{concat:function(r,t){return(0,c.fromCompare)(function(e,n){var o=r.compare(e,n);return o!==0?o:t.compare(e,n)})}}};c.getSemigroup=zo;var Jo=function(){return{concat:(0,c.getSemigroup)().concat,empty:(0,c.fromCompare)(function(){return 0})}};c.getMonoid=Jo;c.Contravariant={URI:c.URI,contramap:Ho};c.trivial={equals:Cr.constTrue,compare:(0,Cr.constant)(0)};var Go=function(r){return function(t){return function(e){return e===t||r.compare(e,t)===0}}};c.equals=Go;var $o=function(r){return function(t,e){return r.compare(t,e)===-1}};c.lt=$o;var Zo=function(r){return function(t,e){return r.compare(t,e)===1}};c.gt=Zo;var Xo=function(r){return function(t,e){return r.compare(t,e)!==1}};c.leq=Xo;var Qo=function(r){return function(t,e){return r.compare(t,e)!==-1}};c.geq=Qo;var Yo=function(r){return function(t,e){return t===e||r.compare(t,e)<1?t:e}};c.min=Yo;var ru=function(r){return function(t,e){return t===e||r.compare(t,e)>-1?t:e}};c.max=ru;var tu=function(r){var t=(0,c.min)(r),e=(0,c.max)(r);return function(n,o){return function(u){return e(t(u,o),n)}}};c.clamp=tu;var eu=function(r){var t=(0,c.lt)(r),e=(0,c.gt)(r);return function(n,o){return function(u){return!(t(u,n)||e(u,o))}}};c.between=eu;c.getTupleOrd=c.tuple;c.getDualOrd=c.reverse;c.ord=c.Contravariant;function nu(r,t){return r<t?-1:r>t?1:0}var lt={equals:Do.eqStrict.equals,compare:nu};c.ordBoolean=lt;c.ordString=lt;c.ordNumber=lt;c.ordDate=(0,Cr.pipe)(c.ordNumber,(0,c.contramap)(function(r){return r.valueOf()}))});var E=D(S());var Br={equals:function(r,t){return r===t}};var Xe={concat:function(r,t){return r&&t}},Qe={concat:function(r,t){return r||t}},mr={concat:Xe.concat,empty:!0},yt={concat:Qe.concat,empty:!1},cu={equals:Br.equals,compare:function(r,t){return r<t?-1:r>t?1:0}};var Ye=function(r,t,e){if(e||arguments.length===2)for(var n=0,o=t.length,u;n<o;n++)(u||!(n in t))&&(u||(u=Array.prototype.slice.call(t,0,n)),u[n]=t[n]);return r.concat(u||Array.prototype.slice.call(t))};function hr(r){return r}function gr(r,t,e,n,o,u,a,i,p){switch(arguments.length){case 1:return r;case 2:return function(){return t(r.apply(this,arguments))};case 3:return function(){return e(t(r.apply(this,arguments)))};case 4:return function(){return n(e(t(r.apply(this,arguments))))};case 5:return function(){return o(n(e(t(r.apply(this,arguments)))))};case 6:return function(){return u(o(n(e(t(r.apply(this,arguments))))))};case 7:return function(){return a(u(o(n(e(t(r.apply(this,arguments)))))))};case 8:return function(){return i(a(u(o(n(e(t(r.apply(this,arguments))))))))};case 9:return function(){return p(i(a(u(o(n(e(t(r.apply(this,arguments)))))))))}}}function U(r,t,e,n,o,u,a,i,p){switch(arguments.length){case 1:return r;case 2:return t(r);case 3:return e(t(r));case 4:return n(e(t(r)));case 5:return o(n(e(t(r))));case 6:return u(o(n(e(t(r)))));case 7:return a(u(o(n(e(t(r))))));case 8:return i(a(u(o(n(e(t(r)))))));case 9:return p(i(a(u(o(n(e(t(r))))))));default:{for(var f=arguments[0],d=1;d<arguments.length;d++)f=arguments[d](f);return f}}}var O=function(r,t){var e=typeof r=="number"?function(n){return n.length>=r}:r;return function(){var n=Array.from(arguments);return e(arguments)?t.apply(this,n):function(o){return t.apply(void 0,Ye([o],n,!1))}}};var rn=function(r,t,e){if(e||arguments.length===2)for(var n=0,o=t.length,u;n<o;n++)(u||!(n in t))&&(u||(u=Array.prototype.slice.call(t,0,n)),u[n]=t[n]);return r.concat(u||Array.prototype.slice.call(t))};var L={_tag:"None"},j=function(r){return{_tag:"Some",value:r}},kr=function(r){return r._tag==="Left"};var Tt=function(r){return{_tag:"Left",left:r}},_t=function(r){return{_tag:"Right",right:r}};var yr=function(r){return r[0]};var Hr=function(r){return rn([r[0]],r.slice(1),!0)};function B(r){return function(t,e){return r.chain(t,function(n){return r.map(e(n),function(){return n})})}}function At(r){return function(t){return gr(t,r.fromEither)}}function It(r,t){var e=At(r),n=B(t);return function(o,u){return n(o,e(u))}}function nr(r){return function(t,e){return r.map(t,function(){return e})}}function Tr(r){var t=nr(r);return function(e){return t(e,void 0)}}var Mt=function(r){return{equals:function(t,e){return t===e||r(t,e)}}};var Kr={equals:function(r,t){return r===t}};var mu=Kr.equals;var tn=function(r){return function(t,e){return t===e||r(t,e)===0}},Et=function(r){return{equals:tn(r),compare:function(t,e){return t===e?0:r(t,e)}}};function en(r,t){return r<t?-1:r>t?1:0}var yu={equals:Kr.equals,compare:en};var on=yr;var Wt=on;var zr=function(r,t,e){if(e||arguments.length===2)for(var n=0,o=t.length,u;n<o;n++)(u||!(n in t))&&(u||(u=Array.prototype.slice.call(t,0,n)),u[n]=t[n]);return r.concat(u||Array.prototype.slice.call(t))},bt=function(r){return r.length>0};var wt=function(r){return function(t){return zr([r],t,!0)}},Jr=wt,Ut=function(r){return function(t){return zr(zr([],t,!0),[r],!1)}},qt=Ut;var an=Hr;var pn=an;var St=function(r){return function(t){var e=Math.max(1,r);return e>=t.length?[pn(t),[]]:[U(t.slice(1,e),Jr(Rr(t))),t.slice(e)]}};var Rr=Wt,Gr=function(r){return r.slice(1)};var or={equals:function(r,t){return r===t}},$r={equals:or.equals,compare:function(r,t){return r<t?-1:r>t?1:0}},Cu={equals:or.equals,compare:$r.compare,top:1/0,bottom:-1/0};var cn={concat:function(r,t){return r-t}},Vt={concat:function(r,t){return r+t}},Ct={concat:function(r,t){return r*t}},Pu={concat:Vt.concat,empty:0},Du={concat:Ct.concat,empty:1},Lu={add:Vt.concat,zero:0,mul:Ct.concat,one:1,sub:cn.concat,degree:function(r){return 1},div:function(r,t){return r/t},mod:function(r,t){return r%t}};function Pt(r){return function(t){for(var e=0;e<t.length;e++)if(r(t[e]))return j(t[e]);return L}}var Dt=function(r){return function(t){return function(e){return e.reduce(function(n,o,u){return r.concat(n,t(u,o))},r.empty)}}};var Lt=function(r){var t=Dt(r);return function(e){return t(function(n,o){return e(o)})}};var jt=function(r){return Mt(function(t,e){return t.length===e.length&&t.every(function(n,o){return r.equals(n,e[o])})})},Bt=function(r){return Et(function(t,e){for(var n=t.length,o=e.length,u=Math.min(n,o),a=0;a<u;a++){var i=r.compare(t[a],e[a]);if(i!==0)return i}return $r.compare(n,o)})};var Zr=function(r){return r.length===0},Xr=bt,Qr=Jr;var ir=qt;var kt=function(r){return r.length};var sn=function(r,t){for(var e=r.length,n=0;n<e&&t(r[n]);n++);return n};function Ht(r){return function(t){var e=xn(sn(t,r))(t),n=e[0],o=e[1];return{init:n,rest:o}}}function Ar(r){return Pt(r)}var ur=function(r){return r.slice()};var Yr=function(r){return function(t){return t.length<=1?ur(t):t.slice().sort(r.compare)}},dn=function(r,t,e){for(var n=[],o=Math.min(r.length,t.length),u=0;u<o;u++)n[u]=e(r[u],t[u]);return n};function rt(r,t){return t===void 0?function(e){return rt(e,r)}:dn(r,t,function(e,n){return[e,n]})}var xn=function(r){return function(t){return r>=1&&Xr(t)?St(r)(t):Zr(t)?[ur(t),[]]:[[],ur(t)]}};var mn=function(r){return function(t){return Zr(t)?ur(r):Zr(r)?ur(t):t.concat(r)}},tt=mn;var ar=Lt;var et=jt,Kt=Bt;var zt=D(S()),F=class{instructions=[];tree;constructor(t){this.tree=t}findNode(t,e){return t===e.id?e:e.kids.map(n=>this.findNode(t,n))[0]}modifyNode(t,e){let n=this.findNode(t,this.tree.root);n!==void 0&&this.instructions.push({node:n,f:e})}removeNode(t){let e=this.findNode(t,this.tree.root);e!==void 0&&this.instructions.push({node:e})}modifications(){return this.instructions}},pr=r=>{let t="";return"kids"in r&&Array.isArray(r.kids)&&r.kids.reduce((e,n)=>e&&Jt(n),!0)?{id:t,...r,kids:r.kids.map(pr)}:{id:t,kids:[],...r}},Jt=r=>typeof r=="object"&&r!==null&&"kids"in r&&Array.isArray(r.kids)&&(0,zt.pipe)(r.kids,ar(mr)(Jt));var cr=L,fr=j;var _n=function(r){return r._tag==="Left"?cr:fr(r.right)},Gt=function(r,t){return U(r,W(t))},Rn=function(r,t){return U(r,An(t))};var ot="Option";var W=function(r){return function(t){return k(t)?cr:fr(r(t.value))}},$t={URI:ot,map:Gt},Ci=O(2,nr($t)),Pi=Tr($t);var An=function(r){return function(t){return k(t)||k(r)?cr:fr(t.value(r.value))}};var In=O(2,function(r,t){return k(r)?cr:t(r.value)}),Zt={URI:ot,map:Gt,ap:Rn,chain:In};var Di=O(2,function(r,t){return k(r)?t():r});var Mn=_n,En={URI:ot,fromEither:Mn};var k=function(r){return r._tag==="None"},Nn=function(r,t){return function(e){return k(e)?r():t(e.value)}};var ut=Nn;var Xt=O(2,B(Zt)),Li=O(2,It(En,Zt));var vr=class{ui;state;events;newEventHandlers=[];constructor(t){this.ui=new F({root:t.ui}),this.state=new F({root:t.state}),this.events=new F({root:t.events})}traverseTree(t,e){let n=o=>e(o);return e(t)?fr(t):(0,E.pipe)(Xt(Ar(n)(t.kids),o=>Ar(n)(o.kids)))}fromNode(t){let{id:e,...n}=t;return{...n}}findUI(t){return(0,E.pipe)(this.traverseTree(this.ui.tree.root,t),ut(()=>{},e=>this.fromNode(e)))}addUI(t,e){return(0,E.pipe)(this.traverseTree(this.ui.tree.root,e),W(({id:n})=>this.ui.modifyNode(n,({kids:o,...u})=>({...u,kids:ir(pr(t))(o)}))),n=>this)}modifyUI(t,e){return(0,E.pipe)(this.traverseTree(this.ui.tree.root,t),W(({id:n})=>this.ui.modifyNode(n,o=>{let{id:u,...a}=o;return{...pr(e(a)),id:u}})),n=>this)}removeUI(t){return(0,E.pipe)(this.traverseTree(this.ui.tree.root,t),W(({id:e})=>this.ui.removeNode(e)),e=>this)}findField(t){return(0,E.pipe)(this.traverseTree(this.state.tree.root,({id:e})=>e===t),ut(()=>{},({id:e,kids:n,...o})=>({...o})))}addField(t,e){return(0,E.pipe)(this.traverseTree(this.state.tree.root,({id:n})=>n==="root"),W(({id:n})=>this.state.modifyNode(n,({kids:o,...u})=>({...u,kids:ir({id:t,kids:[],...e})(o)}))),n=>this)}modifyField(t,e){return(0,E.pipe)(this.traverseTree(this.state.tree.root,({id:n})=>n===t),W(({id:n})=>this.state.modifyNode(n,o=>{let{id:u,...a}=o;return{...pr(e(a)),id:u}})),n=>this)}removeField(t){return(0,E.pipe)(this.traverseTree(this.state.tree.root,({id:e})=>e===t),W(({id:e})=>this.ui.removeNode(e)),e=>this)}addEvent(t){return(0,E.pipe)(this.traverseTree(this.events.tree.root,({id:e})=>e==="root"),W(({id:e})=>this.events.modifyNode(e,({kids:n,...o})=>({...o,kids:ir({id:t.event,kids:[],...t})(n)}))),e=>this)}modifyEvent(t,e){return(0,E.pipe)(this.traverseTree(this.events.tree.root,t),W(({id:n})=>this.events.modifyNode(n,({id:o,kids:u,...a})=>({...e({...a}),id:o,kids:u}))),n=>this)}removeEvent(t){return(0,E.pipe)(this.traverseTree(this.events.tree.root,({id:e})=>e===t),W(({id:e})=>this.ui.removeNode(e)),e=>this)}addEventHandler(t,e){return this.newEventHandlers.push([t,e]),this}build(){return{newEventHandlers:this.newEventHandlers,uiModifications:this.ui.modifications(),stateModifications:this.state.modifications(),eventModifications:this.events.modifications()}}};var q=class r{_kind="frag";_kids=[];_attrs=[];_text=null;kind(t){return this._kind=t,this}kids(...t){return this._kids=t,this}attrs(...t){return this._attrs=t,this}text(t){return this._text=t,this}build(){return{kind:this._kind,kids:this._kids.map(t=>t instanceof r?t.build():t),attrs:this._attrs,text:this._text}}};var H={equals:function(r,t){return r===t}},Wn={concat:function(r,t){return r+t}},bn="",Ki={concat:Wn.concat,empty:bn},Qt={equals:H.equals,compare:function(r,t){return r<t?-1:r>t?1:0}};var br={};we(br,{DAttrs:()=>le,DCoreModification:()=>Oo,DEvent:()=>xe,DHtml:()=>Z,DHtmlKind:()=>se,DInitDecoder:()=>Eo,DIns:()=>he,DInsArr:()=>Wr,DMap:()=>X,DMapArr:()=>Mo,DMsg:()=>ct,DNode:()=>ft,DUpdateDecoder:()=>de,DValue:()=>C,DValueArr:()=>Io,DViewDecoder:()=>No});var Yt=Tt,Ir=_t,Un=O(2,function(r,t){return A(r)?r:t(r.right)}),re=function(r,t){return U(r,Sn(t))},qn=function(r,t){return U(r,Vn(t))};var it="Either";var Sn=function(r){return function(t){return A(t)?t:Ir(r(t.right))}},te={URI:it,map:re},ra=O(2,nr(te)),ta=Tr(te);var Fn=function(r){return function(t){return A(t)?t:A(r)?r:Ir(t.right(r.right))}},Vn=Fn;var Cn={URI:it,map:re,ap:qn,chain:Un};var Pn={URI:it,fromEither:hr};var A=kr;var ea=O(2,B(Cn));var na={fromEither:Pn.fromEither};var x=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var u in o)Object.prototype.hasOwnProperty.call(o,u)&&(n[u]=o[u])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Mr=function(){return Mr=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=t[o])}return r},Mr.apply(this,arguments)};var J=Yt,I=function(r,t,e){return J([{value:r,context:t,message:e}])},_=Ir,m=function(){function r(t,e,n,o){this.name=t,this.is=e,this.validate=n,this.encode=o,this.decode=this.decode.bind(this)}return r.prototype.pipe=function(t,e){var n=this;return e===void 0&&(e="pipe(".concat(this.name,", ").concat(t.name,")")),new r(e,t.is,function(o,u){var a=n.validate(o,u);return A(a)?a:t.validate(a.right,u)},this.encode===g&&t.encode===g?g:function(o){return n.encode(t.encode(o))})},r.prototype.asDecoder=function(){return this},r.prototype.asEncoder=function(){return this},r.prototype.decode=function(t){return this.validate(t,[{key:"",type:this,actual:t}])},r}();var g=function(r){return r};function Dn(r){return r.displayName||r.name||"<function".concat(r.length,">")}function K(r,t,e,n){for(var o=r.length,u=Array(o+1),a=0;a<o;a++)u[a]=r[a];return u[o]={key:t,type:e,actual:n},u}function sr(r,t){for(var e=t.length,n=0;n<e;n++)r.push(t[n])}var lr=Object.prototype.hasOwnProperty;function Ln(r){return Object.keys(r).map(function(t){return"".concat(t,": ").concat(r[t].name)}).join(", ")}function Er(r){for(var t=0;t<r.length;t++)if(r[t].encode!==g)return!1;return!0}function jn(r){return"{ ".concat(Ln(r)," }")}function Bn(r){return"("+r.map(function(t){return t.name}).join(" | ")+")"}function ee(r,t){for(var e=!0,n=!0,o=!z.is(r),u=0,a=t;u<a.length;u++){var i=a[u];i!==r&&(e=!1),z.is(i)&&(n=!1)}if(e)return r;if(n)return t[t.length-1];for(var p={},f=0,d=t;f<d.length;f++){var i=d[f];for(var h in i)(!lr.call(p,h)||o||i[h]!==r[h])&&(p[h]=i[h])}return p}function kn(r){return r.length>0}var N={};function oe(r,t){for(var e=[],n=0,o=r;n<o.length;n++){var u=o[n];t.indexOf(u)!==-1&&e.push(u)}return e}function Hn(r,t){if(r===N)return t;if(t===N)return r;var e=Object.assign({},r);for(var n in t)if(lr.call(r,n)){var o=oe(r[n],t[n]);if(kn(o))e[n]=o;else{e=N;break}}else e[n]=t[n];return e}function Kn(r,t){if(r===N||t===N)return N;var e=N;for(var n in r)if(lr.call(t,n)){var o=oe(r[n],t[n]);o.length===0&&(e===N&&(e={}),e[n]=r[n].concat(t[n]))}return e}function zn(r){return r._tag==="LiteralType"}function Jn(r){return r._tag==="InterfaceType"}function Gn(r){return r._tag==="StrictType"}function $n(r){return r._tag==="ExactType"}function Zn(r){return r._tag==="RefinementType"}function Xn(r){return r._tag==="IntersectionType"}function Qn(r){return r._tag==="UnionType"}function Yn(r){return r._tag==="RecursiveType"}var at=[];function V(r){if(at.indexOf(r)!==-1)return N;if(Jn(r)||Gn(r)){var t=N;for(var e in r.props){var n=r.props[e];zn(n)&&(t===N&&(t={}),t[e]=[n.value])}return t}else{if($n(r)||Zn(r))return V(r.type);if(Xn(r))return r.types.reduce(function(u,a){return Hn(u,V(a))},N);if(Qn(r))return r.types.slice(1).reduce(function(u,a){return Kn(u,V(a))},V(r.types[0]));if(Yn(r)){at.push(r);var o=V(r.type);return at.pop(),o}}return N}function ro(r){var t=V(r[0]),e=Object.keys(t),n=r.length,o=function(f){for(var d=t[f].slice(),h=[t[f]],T=1;T<n;T++){var b=r[T],xr=V(b),w=xr[f];if(w===void 0)return"continue-keys";if(w.some(function(rr){return d.indexOf(rr)!==-1}))return"continue-keys";d.push.apply(d,w),h.push(w)}return{value:[f,h]}};r:for(var u=0,a=e;u<a.length;u++){var i=a[u],p=o(i);if(typeof p=="object")return p.value;switch(p){case"continue-keys":continue r}}}var to=function(r){x(t,r);function t(){var e=r.call(this,"null",function(n){return n===null},function(n,o){return e.is(n)?_(n):I(n,o)},g)||this;return e._tag="NullType",e}return t}(m);var ue=new to,eo=function(r){x(t,r);function t(){var e=r.call(this,"undefined",function(n){return n===void 0},function(n,o){return e.is(n)?_(n):I(n,o)},g)||this;return e._tag="UndefinedType",e}return t}(m);var ne=new eo,no=function(r){x(t,r);function t(){var e=r.call(this,"void",ne.is,ne.validate,g)||this;return e._tag="VoidType",e}return t}(m);var ia=new no,oo=function(r){x(t,r);function t(){var e=r.call(this,"unknown",function(n){return!0},_,g)||this;return e._tag="UnknownType",e}return t}(m);var aa=new oo,uo=function(r){x(t,r);function t(){var e=r.call(this,"string",function(n){return typeof n=="string"},function(n,o){return e.is(n)?_(n):I(n,o)},g)||this;return e._tag="StringType",e}return t}(m);var R=new uo,io=function(r){x(t,r);function t(){var e=r.call(this,"number",function(n){return typeof n=="number"},function(n,o){return e.is(n)?_(n):I(n,o)},g)||this;return e._tag="NumberType",e}return t}(m);var dr=new io,ao=function(r){x(t,r);function t(){var e=r.call(this,"bigint",function(n){return typeof n=="bigint"},function(n,o){return e.is(n)?_(n):I(n,o)},g)||this;return e._tag="BigIntType",e}return t}(m);var pa=new ao,po=function(r){x(t,r);function t(){var e=r.call(this,"boolean",function(n){return typeof n=="boolean"},function(n,o){return e.is(n)?_(n):I(n,o)},g)||this;return e._tag="BooleanType",e}return t}(m);var pt=new po,co=function(r){x(t,r);function t(){var e=r.call(this,"UnknownArray",Array.isArray,function(n,o){return e.is(n)?_(n):I(n,o)},g)||this;return e._tag="AnyArrayType",e}return t}(m);var Nr=new co,fo=function(r){x(t,r);function t(){var e=r.call(this,"UnknownRecord",function(n){return n!==null&&typeof n=="object"&&!Array.isArray(n)},function(n,o){return e.is(n)?_(n):I(n,o)},g)||this;return e._tag="AnyDictionaryType",e}return t}(m);var z=new fo;var vo=function(r){x(t,r);function t(e,n,o,u,a){var i=r.call(this,e,n,o,u)||this;return i.value=a,i._tag="LiteralType",i}return t}(m);function s(r,t){t===void 0&&(t=JSON.stringify(r));var e=function(n){return n===r};return new vo(t,e,function(n,o){return e(n)?_(r):I(n,o)},g,r)}var ca=function(r){x(t,r);function t(e,n,o,u,a){var i=r.call(this,e,n,o,u)||this;return i.keys=a,i._tag="KeyofType",i}return t}(m);var lo=function(r){x(t,r);function t(e,n,o,u,a,i){var p=r.call(this,e,n,o,u)||this;return p.type=a,p.predicate=i,p._tag="RefinementType",p}return t}(m);function so(r,t,e){return fe(r,t,e)}var fa=so(dr,function(r){return Number.isInteger(r)},"Int"),ie=function(r){x(t,r);function t(e,n,o,u,a){var i=r.call(this,e,n,o,u)||this;return i.runDefinition=a,i._tag="RecursiveType",i}return t}(m);Object.defineProperty(ie.prototype,"type",{get:function(){return this.runDefinition()},enumerable:!0,configurable:!0});function Or(r,t){var e,n=function(){return e||(e=t(o),e.name=r),e},o=new ie(r,function(u){return n().is(u)},function(u,a){return n().validate(u,a)},function(u){return n().encode(u)},n);return o}var xo=function(r){x(t,r);function t(e,n,o,u,a){var i=r.call(this,e,n,o,u)||this;return i.type=a,i._tag="ArrayType",i}return t}(m);function M(r,t){return t===void 0&&(t="Array<".concat(r.name,">")),new xo(t,function(e){return Nr.is(e)&&e.every(r.is)},function(e,n){var o=Nr.validate(e,n);if(A(o))return o;for(var u=o.right,a=u.length,i=u,p=[],f=0;f<a;f++){var d=u[f],h=r.validate(d,K(n,String(f),r,d));if(A(h))sr(p,h.left);else{var T=h.right;T!==d&&(i===u&&(i=u.slice()),i[f]=T)}}return p.length>0?J(p):_(i)},r.encode===g?g:function(e){return e.map(r.encode)},r)}var mo=function(r){x(t,r);function t(e,n,o,u,a){var i=r.call(this,e,n,o,u)||this;return i.props=a,i._tag="InterfaceType",i}return t}(m);function y(r,t){t===void 0&&(t=jn(r));var e=Object.keys(r),n=e.map(function(u){return r[u]}),o=e.length;return new mo(t,function(u){if(z.is(u)){for(var a=0;a<o;a++){var i=e[a],p=u[i];if(p===void 0&&!lr.call(u,i)||!n[a].is(p))return!1}return!0}return!1},function(u,a){var i=z.validate(u,a);if(A(i))return i;for(var p=i.right,f=p,d=[],h=0;h<o;h++){var T=e[h],b=f[T],xr=n[h],w=xr.validate(b,K(a,T,xr,b));if(A(w))sr(d,w.left);else{var rr=w.right;(rr!==b||rr===void 0&&!lr.call(f,T))&&(f===p&&(f=Mr({},p)),f[T]=rr)}}return d.length>0?J(d):_(f)},Er(n)?g:function(u){for(var a=Mr({},u),i=0;i<o;i++){var p=e[i],f=n[i].encode;f!==g&&(a[p]=f(u[p]))}return a},r)}var va=function(r){x(t,r);function t(e,n,o,u,a){var i=r.call(this,e,n,o,u)||this;return i.props=a,i._tag="PartialType",i}return t}(m);var la=function(r){x(t,r);function t(e,n,o,u,a,i){var p=r.call(this,e,n,o,u)||this;return p.domain=a,p.codomain=i,p._tag="DictionaryType",p}return t}(m);var ae=function(r){x(t,r);function t(e,n,o,u,a){var i=r.call(this,e,n,o,u)||this;return i.types=a,i._tag="UnionType",i}return t}(m);function G(r,t){t===void 0&&(t=Bn(r));var e=ro(r);if(e!==void 0&&r.length>0){var n=e[0],o=e[1],u=o.length,a=function(i){for(var p=0;p<u;p++)if(o[p].indexOf(i)!==-1)return p};return new Ro(t,function(i){if(z.is(i)){var p=a(i[n]);return p!==void 0?r[p].is(i):!1}return!1},function(i,p){var f=z.validate(i,p);if(A(f))return f;var d=f.right,h=a(d[n]);if(h===void 0)return I(i,p);var T=r[h];return T.validate(d,K(p,String(h),T,d))},Er(r)?g:function(i){var p=a(i[n]);if(p===void 0)throw new Error("no codec found to encode value in union codec ".concat(t));return r[p].encode(i)},r,n)}else return new ae(t,function(i){return r.some(function(p){return p.is(i)})},function(i,p){for(var f=[],d=0;d<r.length;d++){var h=r[d],T=h.validate(i,K(p,String(d),h,i));if(A(T))sr(f,T.left);else return _(T.right)}return J(f)},Er(r)?g:function(i){for(var p=0,f=r;p<f.length;p++){var d=f[p];if(d.is(i))return d.encode(i)}throw new Error("no codec found to encode value in union type ".concat(t))},r)}var ho=function(r){x(t,r);function t(e,n,o,u,a){var i=r.call(this,e,n,o,u)||this;return i.types=a,i._tag="IntersectionType",i}return t}(m);function pe(r,t){t===void 0&&(t="(".concat(r.map(function(n){return n.name}).join(" & "),")"));var e=r.length;return new ho(t,function(n){return r.every(function(o){return o.is(n)})},r.length===0?_:function(n,o){for(var u=[],a=[],i=0;i<e;i++){var p=r[i],f=p.validate(n,K(o,String(i),p,n));A(f)?sr(a,f.left):u.push(f.right)}return a.length>0?J(a):_(ee(n,u))},r.length===0?g:function(n){return ee(n,r.map(function(o){return o.encode(n)}))},r)}var go=function(r){x(t,r);function t(e,n,o,u,a){var i=r.call(this,e,n,o,u)||this;return i.types=a,i._tag="TupleType",i}return t}(m);function $(r,t){t===void 0&&(t="[".concat(r.map(function(n){return n.name}).join(", "),"]"));var e=r.length;return new go(t,function(n){return Nr.is(n)&&n.length===e&&r.every(function(o,u){return o.is(n[u])})},function(n,o){var u=Nr.validate(n,o);if(A(u))return u;for(var a=u.right,i=a.length>e?a.slice(0,e):a,p=[],f=0;f<e;f++){var d=a[f],h=r[f],T=h.validate(d,K(o,String(f),h,d));if(A(T))sr(p,T.left);else{var b=T.right;b!==d&&(i===a&&(i=a.slice()),i[f]=b)}}return p.length>0?J(p):_(i)},Er(r)?g:function(n){return r.map(function(o,u){return o.encode(n[u])})},r)}var sa=function(r){x(t,r);function t(e,n,o,u,a){var i=r.call(this,e,n,o,u)||this;return i.type=a,i._tag="ReadonlyType",i}return t}(m);var da=function(r){x(t,r);function t(e,n,o,u,a){var i=r.call(this,e,n,o,u)||this;return i.type=a,i._tag="ReadonlyArrayType",i}return t}(m);var xa=function(r){x(t,r);function t(e,n,o,u,a){var i=r.call(this,e,n,o,u)||this;return i.type=a,i._tag="ExactType",i}return t}(m);var yo=function(r){x(t,r);function t(){var e=r.call(this,"Function",function(n){return typeof n=="function"},function(n,o){return e.is(n)?_(n):I(n,o)},g)||this;return e._tag="FunctionType",e}return t}(m);var ce=new yo,To=function(r){x(t,r);function t(){var e=r.call(this,"never",function(n){return!1},function(n,o){return I(n,o)},function(){throw new Error("cannot encode never")})||this;return e._tag="NeverType",e}return t}(m);var ma=new To,_o=function(r){x(t,r);function t(){var e=r.call(this,"any",function(n){return!0},_,g)||this;return e._tag="AnyType",e}return t}(m);var ha=new _o;function fe(r,t,e){return e===void 0&&(e="(".concat(r.name," | ").concat(Dn(t),")")),new lo(e,function(n){return r.is(n)&&t(n)},function(n,o){var u=r.validate(n,o);if(A(u))return u;var a=u.right;return t(a)?_(a):I(a,o)},r.encode,r,t)}var ga=fe(dr,Number.isInteger,"Integer"),Ro=function(r){x(t,r);function t(e,n,o,u,a,i){var p=r.call(this,e,n,o,u,a)||this;return p.tag=i,p}return t}(ae);var Ao=function(r){x(t,r);function t(){var e=r.call(this,"object",function(n){return n!==null&&typeof n=="object"},function(n,o){return e.is(n)?_(n):I(n,o)},g)||this;return e._tag="ObjectType",e}return t}(m);var ya=new Ao;var Ta=function(r){x(t,r);function t(e,n,o,u,a){var i=r.call(this,e,n,o,u)||this;return i.props=a,i._tag="StrictType",i}return t}(m);var C=Or("DValue",()=>G([y({int:dr}),y({float:dr}),y({bool:pt}),y({str:R}),y({list:M(C)}),y({obj:M($([R,C]))})])),Io=M(C),ct=y({msg:$([R,C])}),le=G([y({id:R}),y({class:R}),y({style:R}),y({onClick:ct}),y({onInput:ct}),y({emitInput:R}),y({src:R}),y({type:R}),y({checked:pt})]),se=G([s("div"),s("p"),s("h1"),s("h2"),s("h3"),s("h4"),s("h5"),s("h6"),s("span"),s("section"),s("article"),s("aside"),s("audio"),s("b"),s("br"),s("button"),s("code"),s("em"),s("fieldset"),s("form"),s("img"),s("input"),s("label"),s("link"),s("li"),s("menu"),s("nav"),s("ol"),s("option"),s("select"),s("style"),s("svg"),s("table"),s("td"),s("th"),s("ul"),s("video"),s("frag"),s("text"),s("script"),s("tr"),s("tbody"),s("main")]),Z=Or("DHtml",()=>y({kind:se,kids:M(Z),text:G([R,ue]),attrs:M(le)})),X=M($([R,C])),Mo=M(X),de=M($([R,X])),Eo=de,No=M($([R,Z])),xe=y({event:R,module:R}),me=r=>Or("DNodeImpl",()=>y({id:R,kids:M(me(r))})),ft=r=>pe([me(r),r]),he=r=>G([y({node:ft(r)},"DRemIns"),y({node:ft(r),f:ce},"RModIns")]),Wr=r=>M(he(r)),Oo=y({uiModifications:Wr(Z),stateModifications:Wr(C),eventModifications:Wr(xe)});var P=D(vt());var dt=D(S());function ge(r){return r[0]}var Q=ge;var Y=r=>"int"in r,wr=r=>"float"in r,Ur=r=>"str"in r,qr=r=>"bool"in r,Sr=r=>"list"in r,Fr=r=>"obj"in r;var Vr=r=>({int:r});var _e=D(S());var Re=D(Te());var Pr=r=>t=>Xr(t)?(0,_e.pipe)(Rr(t),e=>{let n=Ht(i=>r.equals(e,i))(Gr(t)),o=n.init,u=n.rest;return Qr(Qr(e)(o))(Pr(r)(u))}):[];var st=(0,Re.fromCompare)((r,t)=>Qt.compare(Q(r),Q(t))),ka=Kt(st);var Ae=(0,P.fromEquals)(([r,t],[e,n])=>H.equals(r,e)),xt=(0,P.fromEquals)(([r,t],[e,n])=>H.equals(r,e)?Me.equals(t,n):!1),Qa=(0,P.fromEquals)((r,t)=>(0,dt.pipe)(rt(r)(t),ar(mr)(([e,n])=>xt.equals(e,n)))),Ie=(0,P.fromEquals)((r,t)=>r.length===0||t.length===0?!1:(0,dt.pipe)(tt(r)(t),e=>e,Yr(st),Pr(Ae),ar(yt)(e=>kt(e)!=1))),Me=(0,P.fromEquals)((r,t)=>Y(r)&&Y(t)?or.equals(r.int,t.int):wr(r)&&wr(t)?or.equals(r.float,t.float):Ur(r)&&Ur(t)?H.equals(r.str,t.str):qr(r)&&qr(t)?Br.equals(r.bool,t.bool):Sr(r)&&Sr(t)?et(Me).equals(r.list,t.list):Fr(r)&&Fr(t)?et(xt).equals(Array.from(r.obj.values()),Array.from(t.obj.values())):!1),Ya=(0,P.fromEquals)((r,t)=>H.equals(Q(r),Q(t)));var{DViewDecoder:ou,DInitDecoder:uu,DUpdateDecoder:iu}=br,cp={init:uu,view:ou,update:iu,plugin_init:X,plugin_view:Z,plugin_update:X,get_plugins:M(R)},fp={pluginAssets:[],root:document.body,client:(r,t)=>new Promise(()=>{}),log:{info:console.log,error:console.error},listen:(r,t)=>new Promise(e=>e(void 0)),emit:(r,t)=>new Promise(e=>e()),getPluginPaths:new Promise(r=>r([])),pluginInstallers:[r=>new Promise(t=>t(void 0))]};var mt="CounterPlugin";window.plugins.set(mt,{init:async r=>{let t=new vr(r).addEvent({event:"counter-event",module:mt}).addEventHandler("counter-event",{module:mt,handler:async(e,...n)=>new vr(e).modifyField("count",o=>Y(o)?(o.int+=1,o):Vr(-1)).build()}).addField("count",Vr(0));return t.addUI(new q().kind("div").kids(new q().kind("button").attrs({onClick:{msg:["counter-event",Vr(1)]}}).text(`Count: ${t.findField("count")}`)).build(),e=>!0).build()}});})();
